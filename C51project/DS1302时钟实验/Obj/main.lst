C51 COMPILER V9.01   MAIN                                                                  01/22/2024 21:08:27 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Obj\main.obj
COMPILER INVOKED BY: E:\keilc51\C51\BIN\C51.EXE User\main.c BROWSE INCDIR(.\Public;.\APP\key;.\APP\iic;.\APP\at24c02;.\A
                    -PP\ds18b20;.\APP\ds1302;.\APP\smg) DEBUG OBJECTEXTEND PRINT(.\Obj\main.lst) OBJECT(.\Obj\main.obj)

line level    source

   1          #include "public.h"
   2          #include "smg.h"
   3          #include "key.h"
   4          #include "ds1302.h"
   5          #include "ds18b20.h"
   6          
   7          
   8          /*void main(){
   9                  u8 time_buf[8];
  10                  ds1302_init();
  11                  while(1){
  12                          int i=2000000;
  13                          
  14                          while(i--){
  15                          ds1302_read_time();
  16                          time_buf[0]=gsmg_code[gDS1302_TIME[2]/16];
  17                          time_buf[1]=gsmg_code[gDS1302_TIME[2]%16];
  18                          time_buf[2]=0x40;
  19                          time_buf[3]=gsmg_code[gDS1302_TIME[1]/16];
  20                          time_buf[4]=gsmg_code[gDS1302_TIME[1]%16];
  21                          time_buf[5]=0x40;
  22                          time_buf[6]=gsmg_code[gDS1302_TIME[0]/16];
  23                          time_buf[7]=gsmg_code[gDS1302_TIME[0]%16];
  24                          smg_display(time_buf,1);}
  25                          delay_ms(500);
  26                          i=2000;
  27                          while(i--){
  28                          ds1302_read_time();
  29                          time_buf[0]=gsmg_code[gDS1302_TIME[6]/16];
  30                          time_buf[1]=gsmg_code[gDS1302_TIME[6]%16];
  31                          time_buf[2]=0x40;
  32                          time_buf[3]=gsmg_code[gDS1302_TIME[4]/16];
  33                          time_buf[4]=gsmg_code[gDS1302_TIME[4]%16];
  34                          time_buf[5]=0x40;
  35                          time_buf[6]=gsmg_code[gDS1302_TIME[3]/16];
  36                          time_buf[7]=gsmg_code[gDS1302_TIME[3]%16];
  37                          smg_display(time_buf,1);}
  38                          delay_ms(500);
  39          
  40           }
  41           }*/
  42           void main(){
  43   1              int temp_value=0;
  44   1              u8 i=0;
  45   1              u8 temperature_buf[5];
  46   1              
  47   1              u8 time_buf[8];
  48   1              u8 key=0;
  49   1              
  50   1              ds18b20_init();
  51   1              ds1302_init();
  52   1              while(1){               
  53   2              
  54   2              if(key==0||key==5)
C51 COMPILER V9.01   MAIN                                                                  01/22/2024 21:08:27 PAGE 2   

  55   2                      key=scan(0);
  56   2                              /*if(key==key3_p)
  57   2              {       
  58   2                      while((key!=key1_p)&&(key!=key2_p))             
  59   2                      {
  60   2                              i++;
  61   2                              if(i%50==0)
  62   2                              temp_value=ds18b20_read_temperature()*10;
  63   2      
  64   2                              if(temp_value<0)
  65   2                      {
  66   2                              temp_value=-temp_value;
  67   2                              temperature_buf[0]=0x40;
  68   2      
  69   2                      }
  70   2                              else temperature_buf[0]=0x00;
  71   2                              temperature_buf[1]=gsmg_code[temp_value/1000];
  72   2                              temperature_buf[2]=gsmg_code[temp_value%1000/100];
  73   2                              temperature_buf[3]=gsmg_code[temp_value%1000%100/10]|0x80;
  74   2                              temperature_buf[4]=gsmg_code[temp_value%1000%100%10];
  75   2                              smg_display(temperature_buf,4);
  76   2                              key=scan(0);
  77   2                      }
  78   2                      
  79   2              }*/ //不显示温度，不知道为什么  
  80   2                      
  81   2       
  82   2       
  83   2                              if(key==key1_p)
  84   2              {       while((key!=key3_p)&&(key!=key2_p)){
  85   4                      
  86   4                      ds1302_read_time();
  87   4                      time_buf[0]=gsmg_code[gDS1302_TIME[2]/16];
  88   4                      time_buf[1]=gsmg_code[gDS1302_TIME[2]%16];
  89   4                      time_buf[2]=0x40;
  90   4                      time_buf[3]=gsmg_code[gDS1302_TIME[1]/16];
  91   4                      time_buf[4]=gsmg_code[gDS1302_TIME[1]%16];
  92   4                      time_buf[5]=0x40;
  93   4                      time_buf[6]=gsmg_code[gDS1302_TIME[0]/16];
  94   4                      time_buf[7]=gsmg_code[gDS1302_TIME[0]%16];
  95   4                      smg_display(time_buf,1);
  96   4                      key=scan(0);
  97   4              }}      
  98   2                      
  99   2                      if(key==key2_p)
 100   2              {       while((key!=key1_p)&&(key!=key3_p)){
 101   4                      
 102   4                      ds1302_read_time();
 103   4                      time_buf[0]=gsmg_code[gDS1302_TIME[6]/16];
 104   4                      time_buf[1]=gsmg_code[gDS1302_TIME[6]%16];
 105   4                      time_buf[2]=0x40;
 106   4                      time_buf[3]=gsmg_code[gDS1302_TIME[4]/16];
 107   4                      time_buf[4]=gsmg_code[gDS1302_TIME[4]%16];
 108   4                      time_buf[5]=0x40;
 109   4                      time_buf[6]=gsmg_code[gDS1302_TIME[3]/16];
 110   4                      time_buf[7]=gsmg_code[gDS1302_TIME[3]%16];
 111   4                      smg_display(time_buf,1);
 112   4                      key=scan(0);
 113   4              }}      
 114   2              }       
 115   1               }
*** WARNING C280 IN LINE 45 OF USER\MAIN.C: 'temperature_buf': unreferenced local variable
C51 COMPILER V9.01   MAIN                                                                  01/22/2024 21:08:27 PAGE 3   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    258    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      17
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
