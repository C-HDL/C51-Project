C51 COMPILER V9.01   MAIN                                                                  01/11/2024 14:50:21 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\keilc51\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "reg52.h"
   2          #define KEY P1
   3          #define SMG P0
   4          sbit LSA = P2^2;
   5          sbit LSB = P2^3;
   6          sbit LSC = P2^4;
   7          
   8          unsigned char gsmg_code[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,
   9          0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};
  10          
  11          
  12          
  13          void delay(unsigned int x){
  14   1           while(x--);
  15   1               }
  16          unsigned char scan1(){                  
  17   1            unsigned char value = 0;
  18   1                KEY = 0xf7;
  19   1                if(KEY != 0xf7){
  20   2                   delay(1000);
  21   2                   switch(KEY){
  22   3                           case 0x77:value=1;break;
  23   3                               case 0xb7:value=5;break;
  24   3                               case 0xd7:value=9;break;
  25   3                               case 0xe7:value=13;break;}
  26   2                               }
  27   1                               //while(KEY != 0xf7);
  28   1                KEY = 0xfb;
  29   1                if(KEY != 0xfb){
  30   2                   delay(1000);
  31   2                   switch(KEY){
  32   3                           case 0x7b:value=2;break;
  33   3                               case 0xbb:value=6;break;
  34   3                               case 0xdb:value=10;break;
  35   3                               case 0xeb:value=14;break;}
  36   2                               }
  37   1                KEY = 0xfd;
  38   1                if(KEY != 0xfd){
  39   2                   delay(1000);
  40   2                   switch(KEY){
  41   3                           case 0x7d:value=3;break;
  42   3                               case 0xbd:value=7;break;
  43   3                               case 0xdd:value=11;break;
  44   3                               case 0xed:value=15;break;}
  45   2                               }
  46   1                KEY = 0xfe;
  47   1                if(KEY != 0xfe){
  48   2                   delay(1000);
  49   2                   switch(KEY){
  50   3                           case 0x7e:value=4;break;
  51   3                               case 0xbe:value=8;break;
  52   3                               case 0xde:value=12;break;
  53   3                               case 0xee:value=16;break;}
  54   2                               }
  55   1                
C51 COMPILER V9.01   MAIN                                                                  01/11/2024 14:50:21 PAGE 2   

  56   1                return value;}
  57          
  58          unsigned char scan2(){
  59   1              static unsigned char value=0;
  60   1                      KEY=0x0f;
  61   1                      if(KEY!=0x0f){
  62   2                          delay(1000);
  63   2                              switch(KEY){
  64   3                                 case 0x07:value=1;break;
  65   3                                 case 0x0b:value=2;break;
  66   3                                 case 0x0d:value=3;break;
  67   3                                 case 0x0e:value=4;break;     }
  68   2                                 }
  69   1                  KEY=0xf0;
  70   1                      
  71   1                              switch(KEY){
  72   2                                 case 0x70:value=value;break;
  73   2                                 case 0xb0:value=value+4;break;
  74   2                                 case 0xd0:value=value+8;break;
  75   2                                 case 0xe0:value=value+12;break;      }
  76   1                                 
  77   1                                 
  78   1                      return value;
  79   1                      }
  80          
  81          void main()
  82          {        unsigned char key=0; 
  83   1           int i;
  84   1               while(1)
  85   1               {
  86   2               
  87   2               key=scan2();
  88   2               if(key!=0)
  89   2               for(i=0;i<8;i++){
  90   3               switch(i){
  91   4                case 0:LSC=1;LSB=1;LSA=1;break;
  92   4                case 1:LSC=1;LSB=1;LSA=0;break;
  93   4                case 2:LSC=1;LSB=0;LSA=1;break;
  94   4                case 3:LSC=1;LSB=0;LSA=0;break;
  95   4                case 4:LSC=0;LSB=1;LSA=1;break;
  96   4                case 5:LSC=0;LSB=1;LSA=0;break;
  97   4                case 6:LSC=0;LSB=0;LSA=1;break;
  98   4                case 7:LSC=0;LSB=0;LSA=0;break;} 
  99   3               SMG= gsmg_code[key-1];
 100   3               delay(100);
 101   3               
 102   3                }      
 103   2               }
 104   1               }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    440    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     17       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
